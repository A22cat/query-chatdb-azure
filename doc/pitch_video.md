# Pitch Video: Qnect (キュネクト)- 対話型DBクエリ支援システム

## 1. 概要 (0:00～)

今回開発した「Qnect（キュネクト）」は、Azure OpenAIとAzure AI Searchを活用した、**SQLの専門知識が不要で自然言語を用いてデータベースと対話できる**システムです。

## 2. 主要機能デモ (0:20～)

* **自然言語でのクエリ生成 (0:20～)**
    * 「各製品の総売上金額を計算し、金額が多い順に並べて。」といった日本語の質問を入力し、「SQL作成」ボタンを押すだけで、Azure OpenAIが瞬時にSQLクエリを自動生成します。これにより、誰でも簡単にデータベースへアクセスが可能となります。

* **データベース(Azure SQL Database)からデータ取得とAIによる要約 (0:50～)**
    * 生成されたSQLを「SQL実行」ボタンで実行し、データベースからデータを取得します。
    * AIが取得データを分析し、「要約と結果の説明」ボタンでを要約と結果の説明を自動で生成。情報を簡潔に把握し、迅速な意思決定を可能にします。
    * 生成された要約や履歴は、ローカル(JSON形式)とAzure AI Search、Cosmos DBにナレッジとして蓄積されます。

* **対話形式での深掘りとセキュリティ (1:50～)**
    * 初回の結果に対し、「総売上が3番目に多い製品を購入した顧客情報を教えて」といった追加指示を「送信」ボタンを押して対話形式で行えます。
    * 顧客の性別や誕生日などの機密情報は自動的にマスキング処理され、安全に分析を進めることができます。
    * 対話形式でのチャット内容(SQLや要約含む)も、通常のUI側と同様にローカル(JSON形式)とAzure AI Search、Cosmos DBにナレッジとして蓄積されます。

* **高度な履歴検索 (3:15～)**
    * 蓄積された対話履歴に対し、「総売上を計算して」といったキーワードを入力し「検索実行」ボタンで検索結果が表示されます。
    * Azure AI Searchによるベクトル類似検索と、Cosmos DBによるキーワード検索の両方で、過去の対話履歴を効率的に探し出します。

* **DBスキーマ管理と質問例 (4:15～)**
    * STEP1では、「DB接続」ボタンを押してデータベースに接続します。
    * STEP2では、データベースのスキーマ構造が変更された場合でも、「選択したテーブル定義ファイルを更新」ボタンでUIから簡単な操作で定義ファイルを更新し、常に最新の情報に基づいた高精度なSQL生成を維持します。
    * DBスキーマ管理画面の下部の"質問例を見る（プロンプト作成のヒント）"を押すと、質問例が表示されます。質問作成の参考としてご活用ください。

## 3. 今後の展望 (4:50～)

今後は、テーブル数の増加やスキーマ構成が複雑になった場合にも効率的に対応できるよう、LangChain を使用してユーザークエリから関連するテーブルを事前に推定し、必要なスキーマ情報のみを抽出する仕組みを導入予定です。これにより、不要な情報の送信を抑えつつ、該当テーブルの詳細情報を適切に送信し、高精度なSQLクエリの生成を実現する機能拡充を計画しています。